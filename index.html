<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Name Encoder</title>

<style>
:root {
    --bg: #f2f2f2;
    --card: #ffffff;
    --text: #000000;
    --accent: #4CAF50;
    --input: #ffffff;
}

body.dark {
    --bg: #121212;
    --card: #1e1e1e;
    --text: #ffffff;
    --accent: #66bb6a;
    --input: #2a2a2a;
}

body {
    margin: 0;
    font-family: 'Segoe UI', Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    transition: 0.3s;
}

.container {
    background: var(--card);
    width: 100%;
    max-width: 380px;
    padding: 20px;
    border-radius: 16px;
    box-shadow: 0 15px 30px rgba(0,0,0,0.25);
    transition: 0.3s;
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.header h2 {
    margin: 0;
}

.toggle {
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
}

.tabs {
    display: flex;
    margin-bottom: 10px;
}

.tab {
    flex: 1;
    padding: 10px;
    border: none;
    cursor: pointer;
    font-weight: bold;
    background: #ccc;
    transition: 0.3s;
}

.tab.active {
    background: var(--accent);
    color: white;
}

.content { display: none; }
.content.active { display: block; }

input, button {
    width: 100%;
    padding: 12px;
    margin-top: 8px;
    border-radius: 10px;
    border: none;
    font-size: 16px;
    box-sizing: border-box;
}

input {
    background: var(--input);
    color: var(--text);
}

button.main {
    background: var(--accent);
    color: white;
    cursor: pointer;
}

button.copy {
    background: #777;
    margin-top: 5px;
}

.result {
    margin-top: 10px;
    word-break: break-word;
    font-weight: bold;
}

.error {
    color: #ff5252;
}
</style>
</head>

<body>
<div class="container">

    <div class="header">
        <h2>üîê Name Encoder</h2>
        <button class="toggle" onclick="toggleDark()">üåô</button>
    </div>

    <div class="tabs">
        <button class="tab active" onclick="showTab('encode')">Encode</button>
        <button class="tab" onclick="showTab('decode')">Decode</button>
    </div>

    <!-- ENCODE -->
    <div id="encode" class="content active">
        <input type="password" id="encodeKey" placeholder="Secret key">
        <input type="text" id="encodeInput" placeholder="Text to encode">
        <button class="main" onclick="encode()">Encode</button>
        <div class="result" id="encodeResult"></div>
        <button class="copy" onclick="copyText('encodeResult')">Copy</button>
    </div>

    <!-- DECODE -->
    <div id="decode" class="content">
        <input type="password" id="decodeKey" placeholder="Secret key">
        <input type="text" id="decodeInput" placeholder="Encoded text">
        <button class="main" onclick="decode()">Decode</button>
        <div class="result" id="decodeResult"></div>
        <button class="copy" onclick="copyText('decodeResult')">Copy</button>
    </div>

</div>

<script>
const REAL_SECRET = "2025dec4_16_kanizsa";
const ALPHABET = "abcdefghijklmnopqrstuvwxyz";

function getKey(secret) {
    let k = 0;
    for (let c of secret) k += c.charCodeAt(0);
    return k % 26;
}

function showTab(tab) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
    document.querySelector(`button[onclick="showTab('${tab}')"]`).classList.add('active');
    document.getElementById(tab).classList.add('active');
}

function encode() {
    let keyInput = document.getElementById("encodeKey").value;
    let text = document.getElementById("encodeInput").value.toLowerCase();

    if (keyInput !== REAL_SECRET) {
        document.getElementById("encodeResult").innerHTML = "<span class='error'>Wrong key</span>";
        return;
    }

    let key = getKey(keyInput);
    let result = "";

    for (let i = 0; i < text.length; i++) {
        let c = text.charCodeAt(i);
        if (c < 97 || c > 122) {
            document.getElementById("encodeResult").innerHTML =
                "<span class='error'>Only letters allowed</span>";
            return;
        }
        let v = (c - 97 + key + i) % 26;
        result += ALPHABET[v];
    }

    if (Math.random() < 0.5)
        result = result[0].toUpperCase() + result.slice(1);

    document.getElementById("encodeResult").innerText = result;
}

function decode() {
    let keyInput = document.getElementById("decodeKey").value;
    let text = document.getElementById("decodeInput").value.toLowerCase();

    if (keyInput !== REAL_SECRET) {
        document.getElementById("decodeResult").innerHTML = "<span class='error'>Wrong key</span>";
        return;
    }

    let key = getKey(keyInput);
    let result = "";

    for (let i = 0; i < text.length; i++) {
        let idx = ALPHABET.indexOf(text[i]);
        if (idx === -1) {
            document.getElementById("decodeResult").innerHTML =
                "<span class='error'>Invalid text</span>";
            return;
        }
        let c = (idx - key - i + 260) % 26;
        result += String.fromCharCode(c + 97);
    }

    document.getElementById("decodeResult").innerText = result;
}

function copyText(id) {
    let text = document.getElementById(id).innerText;
    navigator.clipboard.writeText(text);
}

function toggleDark() {
    document.body.classList.toggle("dark");
}
</script>

</body>
</html>
